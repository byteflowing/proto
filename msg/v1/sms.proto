syntax = "proto3";

package msg.v1;

import "enums/v1/message.proto";
import "buf/validate/validate.proto";
import "validation/v1/predefined_rules.proto";
import "common/v1/common.proto";

message SendSmsReq {
  // 短信服务商
  enums.v1.SmsVendor vendor = 1 [(buf.validate.field).enum.(validation.v1.not_unspecified) = true];
  // 账号
  string account = 2 [(buf.validate.field).string.(validation.v1.required_50) = true];
  // 手机号码
  common.v1.PhoneNumber phone_number = 3 [(buf.validate.field).required = true];
  // 手机签名(短信服务商申请)
  string sign_name = 4 [(buf.validate.field).string.(validation.v1.required_20) = true];
  // 模板编号(短信服务商申请)
  string template_code = 5 [(buf.validate.field).string.(validation.v1.required_20) = true];
  // 模板中对应的参数
  map<string, string> template_params = 6 [
    (buf.validate.field).map.min_pairs = 1,
    (buf.validate.field).map.values = {
      string: {
        min_len: 1
        max_len: 20
      }
    }
  ];
}

message SendSmsResp {
  // 正常返回0，错误返回非0
  uint32 err_code = 1;
  // 正常返回OK, 错误返回错误内容
  string err_msg = 2;
  // 开发模式，返回详细错误信息
  string err_detail = 3;
}
