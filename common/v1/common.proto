syntax = "proto3";

package common.v1;

import "validation/v1/predefined_rules.proto";
import "google/protobuf/duration.proto";
import "buf/validate/validate.proto";

message LimitRule {
  // 短信发送限制时间周期
  google.protobuf.Duration duration = 1 [(buf.validate.field).duration.gt = { seconds: 1 }];
  // 周期内的限制次数
  int32 limit = 2 [(buf.validate.field).int32.gt = 0];
  // 限制的标签，方便识别
  string tag = 3 [(buf.validate.field).string.(validation.v1.optional_20) = true];
  // 作为返回值有效，还有多少秒可以重试
  optional int64 retry_after = 4;
}

message PhoneNumber {
  // 国家编号
  string country_code = 1 [
    (buf.validate.field).string = {
      min_len: 1
      max_len: 4
    }
  ];
  // 手机号码
  string number = 2 [
    (buf.validate.field).string = {
      min_len: 6
      max_len: 11
    }
  ];
}

message AdminRegion {
  // 国家编码
  string country_code = 1 [(buf.validate.field).string.(validation.v1.required_10) = true];
  // 省编码
  string province_code = 2 [(buf.validate.field).string.(validation.v1.required_10) = true];
  // 市编码
  string city_code = 3 [(buf.validate.field).string.(validation.v1.required_10) = true];
  // 区编码
  string district_code = 4 [(buf.validate.field).string.(validation.v1.required_10) = true];
}