syntax = "proto3";

package limiter.v1;

import "google/protobuf/duration.proto";
import "buf/validate/validate.proto";
import "validation/v1/predefined_rules.proto";

message LimitRule {
  // 短信发送限制时间周期
  google.protobuf.Duration duration = 1 [(buf.validate.field).duration.gt = { seconds: 1 }];
  // 周期内的限制次数
  int32 limit = 2 [(buf.validate.field).int32.gt = 0];
  // 限制的标签，方便识别
  string tag = 3 [(buf.validate.field).string.(validation.v1.optional_20) = true];
  // 作为返回值有效，还有多少秒可以重试
  optional int64 retry_after = 4;
}